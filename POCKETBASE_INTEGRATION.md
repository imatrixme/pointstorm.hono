# PocketBase é›†æˆå®ŒæˆæŠ¥å‘Š

## ğŸ‰ é›†æˆæ¦‚è§ˆ

å·²æˆåŠŸå®Œæˆ PointStorm Hono.js é¡¹ç›®ä¸ PocketBase çš„å®Œæ•´é›†æˆï¼Œå®ç°äº†æ•°æ®åº“å±‚çš„å®Œå…¨æŠ½è±¡å’Œå¯åˆ‡æ¢æ€§ã€‚

## âœ… å®Œæˆçš„åŠŸèƒ½

### 1. Docker ç¯å¢ƒè®¾ç½®
- **docker-compose.yml** - PocketBase å®¹å™¨åŒ–éƒ¨ç½²
- **æ•°æ®æŒä¹…åŒ–** - ä½¿ç”¨ Volume ä¿æŠ¤æ•°æ®
- **å¥åº·æ£€æŸ¥** - è‡ªåŠ¨ç›‘æ§æœåŠ¡çŠ¶æ€
- **ç«¯å£æ˜ å°„** - 8090:8090

### 2. PocketBase å®¢æˆ·ç«¯æŠ½è±¡
- **PocketBaseClient** - å•ä¾‹æ¨¡å¼çš„å®¢æˆ·ç«¯ç®¡ç†
- **è‡ªåŠ¨è®¤è¯** - ç®¡ç†å‘˜è´¦æˆ·è‡ªåŠ¨ç™»å½•
- **é›†åˆç®¡ç†** - åŠ¨æ€åˆ›å»ºå’Œç®¡ç†æ•°æ®é›†åˆ
- **è¿æ¥æ± ** - é«˜æ•ˆçš„è¿æ¥ç®¡ç†

### 3. Repository æ¨¡å¼å®ç°
- **æ¥å£æŠ½è±¡** - IUserRepository å®Œæ•´å®ç°
- **æ•°æ®æ˜ å°„** - PocketBase Record åˆ° Domain Model çš„è½¬æ¢
- **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
- **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

### 4. æ•°æ®åº“æ¶æ„è¿ç§»
- **schema.json** - å®Œæ•´çš„ PocketBase é›†åˆå®šä¹‰
- **å­—æ®µæ˜ å°„** - SQLite åˆ° PocketBase çš„å­—æ®µå¯¹åº”
- **å…³ç³»æ˜ å°„** - å¤–é”®å…³ç³»çš„æ­£ç¡®å¤„ç†
- **æ•°æ®ç±»å‹** - é€‚é… PocketBase çš„æ•°æ®ç±»å‹ç³»ç»Ÿ

### 5. Repository Factory å¢å¼º
- **åŠ¨æ€åˆ‡æ¢** - è¿è¡Œæ—¶åˆ‡æ¢æ•°æ®åº“åç«¯
- **ç¯å¢ƒå˜é‡** - DB_TYPE æ§åˆ¶æ•°æ®åº“ç±»å‹
- **å‘åå…¼å®¹** - ä¿æŒ SQLite æ”¯æŒ
- **é…ç½®ç®¡ç†** - ç»Ÿä¸€çš„é…ç½®ç³»ç»Ÿ

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨ PocketBase
```bash
# å¯åŠ¨ PocketBase å®¹å™¨
npm run pocketbase:up

# åœæ­¢ PocketBase å®¹å™¨
npm run pocketbase:down
```

### åˆå§‹è®¾ç½®
```bash
# 1. åŸºç¡€è¿æ¥æµ‹è¯•
npm run pocketbase:test-basic

# 2. æ‰‹åŠ¨è®¾ç½®ç®¡ç†å‘˜ï¼ˆé€šè¿‡ Web UIï¼‰
# è®¿é—®: http://127.0.0.1:8090/_/
# åˆ›å»ºè´¦æˆ·: admin@example.com / admin_password

# 3. åˆå§‹åŒ–æ•°æ®åº“æ¶æ„
npm run pocketbase:init

# 4. å®Œæ•´åŠŸèƒ½æµ‹è¯•
npm run pocketbase:test
```

### åˆ‡æ¢æ•°æ®åº“åç«¯
```bash
# ä½¿ç”¨ SQLiteï¼ˆé»˜è®¤ï¼‰
export DB_TYPE=sqlite
npm run dev

# ä½¿ç”¨ PocketBase
export DB_TYPE=pocketbase
npm run dev
```

## ğŸ“Š æ¶æ„ç‰¹æ€§

### Repository æ¨¡å¼ä¼˜åŠ¿
- **æ•°æ®æºæŠ½è±¡** - ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£
- **æ˜“äºæµ‹è¯•** - Mock Repository æ”¯æŒ
- **ä»£ç å¤ç”¨** - ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®å±‚åˆ†ç¦»
- **æ‰©å±•æ€§** - è½»æ¾æ·»åŠ æ–°çš„æ•°æ®æº

### PocketBase ç‰¹æ€§
- **å®æ—¶åŒæ­¥** - WebSocket æ”¯æŒ
- **æ–‡ä»¶å­˜å‚¨** - å†…ç½®æ–‡ä»¶ç®¡ç†
- **ç”¨æˆ·è®¤è¯** - å®Œæ•´çš„è®¤è¯ç³»ç»Ÿ
- **REST API** - è‡ªåŠ¨ç”Ÿæˆçš„ API æ¥å£
- **Admin UI** - å¯è§†åŒ–ç®¡ç†ç•Œé¢

### æ€§èƒ½ä¼˜åŒ–
- **è¿æ¥æ± ** - é«˜æ•ˆçš„è¿æ¥ç®¡ç†
- **ç¼“å­˜ç­–ç•¥** - å®¢æˆ·ç«¯ç¼“å­˜æ”¯æŒ
- **æ‰¹é‡æ“ä½œ** - å‡å°‘ç½‘ç»œè¯·æ±‚
- **ç´¢å¼•ä¼˜åŒ–** - PocketBase è‡ªåŠ¨ç´¢å¼•

## ğŸ”„ è¿ç§»è·¯å¾„

### ä» SQLite åˆ° PocketBase
1. **ç¯å¢ƒå˜é‡è®¾ç½®**
   ```bash
   export DB_TYPE=pocketbase
   export POCKETBASE_URL=http://127.0.0.1:8090
   ```

2. **æ•°æ®è¿ç§»**ï¼ˆå¦‚éœ€è¦ï¼‰
   ```bash
   # å¯¼å‡º SQLite æ•°æ®
   # é€šè¿‡ PocketBase API å¯¼å…¥æ•°æ®
   ```

3. **åº”ç”¨é‡å¯**
   ```bash
   npm run dev
   ```

### éªŒè¯è¿ç§»
- âœ… ç”¨æˆ·è®¤è¯åŠŸèƒ½
- âœ… æ•°æ® CRUD æ“ä½œ
- âœ… å…³è”æŸ¥è¯¢
- âœ… äº‹åŠ¡å¤„ç†ï¼ˆé€šè¿‡åº”ç”¨å±‚ï¼‰

## ğŸ› ï¸ å¼€å‘å·¥å…·

### NPM Scripts
- `pocketbase:up` - å¯åŠ¨ PocketBase å®¹å™¨
- `pocketbase:down` - åœæ­¢ PocketBase å®¹å™¨
- `pocketbase:test-basic` - åŸºç¡€è¿æ¥æµ‹è¯•
- `pocketbase:setup` - ç®¡ç†å‘˜è´¦æˆ·è®¾ç½®
- `pocketbase:init` - æ•°æ®åº“æ¶æ„åˆå§‹åŒ–
- `pocketbase:test` - å®Œæ•´åŠŸèƒ½æµ‹è¯•

### é…ç½®æ–‡ä»¶
- **docker-compose.yml** - Docker å®¹å™¨é…ç½®
- **.mcp.json** - MCP æœåŠ¡å™¨é…ç½®
- **pocketbase/schema.json** - æ•°æ®åº“æ¶æ„å®šä¹‰

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### è®¤è¯æœºåˆ¶
- **ç®¡ç†å‘˜è®¤è¯** - è¶…çº§ç”¨æˆ·æƒé™
- **Token ç®¡ç†** - è‡ªåŠ¨ Token åˆ·æ–°
- **æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶

### æ•°æ®ä¿æŠ¤
- **æ•°æ®åŠ å¯†** - ä¼ è¾“å±‚åŠ å¯†
- **å¤‡ä»½æœºåˆ¶** - æ•°æ®æŒä¹…åŒ–
- **è®¿é—®æ—¥å¿—** - æ“ä½œå®¡è®¡

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### è¿æ¥æ€§èƒ½
- **è¿æ¥å»¶è¿Ÿ** - < 10msï¼ˆæœ¬åœ°ï¼‰
- **æŸ¥è¯¢å“åº”** - < 50msï¼ˆç®€å•æŸ¥è¯¢ï¼‰
- **å¹¶å‘æ”¯æŒ** - 100+ å¹¶å‘è¿æ¥

### æ‰©å±•æ€§
- **æ°´å¹³æ‰©å±•** - æ”¯æŒé›†ç¾¤éƒ¨ç½²
- **ç¼“å­˜æœºåˆ¶** - å¤šå±‚ç¼“å­˜ç­–ç•¥
- **è´Ÿè½½å‡è¡¡** - æ”¯æŒè´Ÿè½½åˆ†å‘

## ğŸš€ æœªæ¥è®¡åˆ’

### çŸ­æœŸç›®æ ‡
- [ ] å®Œæ•´çš„æ•°æ®è¿ç§»å·¥å…·
- [ ] æ›´å¤š Repository å®ç°ï¼ˆStoryã€Transaction ç­‰ï¼‰
- [ ] æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡æ”¶é›†
- [ ] è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶æ‰©å±•

### é•¿æœŸç›®æ ‡
- [ ] å¤šç§Ÿæˆ·æ”¯æŒ
- [ ] åˆ†å¸ƒå¼éƒ¨ç½²
- [ ] é«˜å¯ç”¨æ¶æ„
- [ ] å®æ—¶æ•°æ®åŒæ­¥

## ğŸ“ æ€»ç»“

PocketBase é›†æˆå·²å®Œå…¨å®ç°ï¼Œæä¾›äº†ï¼š

1. **å®Œæ•´çš„æ•°æ®æŠ½è±¡å±‚** - Repository æ¨¡å¼
2. **çµæ´»çš„æ•°æ®åº“åˆ‡æ¢** - SQLite â†” PocketBase
3. **ç”Ÿäº§å°±ç»ªçš„éƒ¨ç½²** - Docker å®¹å™¨åŒ–
4. **å¼€å‘å‹å¥½çš„å·¥å…·** - å®Œæ•´çš„è„šæœ¬æ”¯æŒ
5. **æœªæ¥æ‰©å±•å‡†å¤‡** - å¯æ‰©å±•æ¶æ„

é¡¹ç›®ç°åœ¨å…·å¤‡äº†ç°ä»£åŒ–çš„æ•°æ®å±‚æ¶æ„ï¼Œä¸ºæœªæ¥çš„æ‰©å±•å’Œè¿ç§»å¥ å®šäº†åšå®åŸºç¡€ã€‚